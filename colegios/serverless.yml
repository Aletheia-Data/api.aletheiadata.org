org: enzovezzaro
app: opendatadr
service: opendatadr-api-v1-colegios
provider:
  name: aws
  runtime: nodejs12.x
  region: us-east-1
  apiGateway:
    restApiId:
      "Fn::ImportValue": OpenDataGW-restApiId
    restApiRootResourceId:
      "Fn::ImportValue": OpenDataGW-rootResourceId
functions:
  get-colegios:
    handler: handler.getColegios
    events:
      - http:
          path: /colegios-electorales/{year}
          method: get
          request:
            parameters:
              paths:
                year: true
              querystrings:
                start: false
                query: false
                value: false
    environment:
      ENDPOINT: ${file(../serverless.env.yml):${opt:stage}.ENDPOINT}
      PORT: ${file(../serverless.env.yml):${opt:stage}.PORT}
      DATABASE: ${file(../serverless.env.yml):${opt:stage}.DATABASE}
      USERNAME: ${file(../serverless.env.yml):${opt:stage}.USERNAME}
      PASSWORD: ${file(../serverless.env.yml):${opt:stage}.PASSWORD}
  get-recintos:
    handler: handler.getRecintos
    events:
      - http:
          path: /colegios-electorales/{year}/recintos
          method: get
          request:
            parameters:
              paths:
                year: true
              querystrings:
                start: false
                query: false
                value: false
    environment:
      ENDPOINT: ${file(../serverless.env.yml):${opt:stage}.ENDPOINT}
      PORT: ${file(../serverless.env.yml):${opt:stage}.PORT}
      DATABASE: ${file(../serverless.env.yml):${opt:stage}.DATABASE}
      USERNAME: ${file(../serverless.env.yml):${opt:stage}.USERNAME}
      PASSWORD: ${file(../serverless.env.yml):${opt:stage}.PASSWORD}
  get-sectores:
    handler: handler.getSectores
    events:
      - http:
          path: /colegios-electorales/{year}/sectores
          method: get
          request:
            parameters:
              paths:
                year: true
              querystrings:
                start: false
                query: false
                value: false
    environment:
      ENDPOINT: ${file(../serverless.env.yml):${opt:stage}.ENDPOINT}
      PORT: ${file(../serverless.env.yml):${opt:stage}.PORT}
      DATABASE: ${file(../serverless.env.yml):${opt:stage}.DATABASE}
      USERNAME: ${file(../serverless.env.yml):${opt:stage}.USERNAME}
      PASSWORD: ${file(../serverless.env.yml):${opt:stage}.PASSWORD}
